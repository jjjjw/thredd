var coll = require('./collections').users
  , findById = require('./helpers').findById
  , objectIds = require('./helpers').objectIds
  , schema = require('./schemas/user')
  , transforms = require('./transforms')
  , validateAndSave = require('./helpers').validateAndSave
  ;

exports.get = function (id) {
  return findById(id, coll);
};

exports.getForComments = function (commentList) {
  var users = transforms.listify(commentList).map(function (comment) {
    return comment.user;
  });
  return exports.get(users);
};

exports.post = function (user) {
  return validateAndSave(user, schema, coll);
};
