var React = require('react');

module.exports = React.createClass({
  getInitialState: function() {
    return {text: ''};
  }
  , onChange: function(e) {
    this.setState({text: e.target.value});
  }
  , handleSubmit: function(e) {
    e.preventDefault();
    var ev = new CustomEvent('commentEntered', {
      bubbles: true
      , detail: {
        body: this.state.text
      }
    });
    this.getDOMNode().dispatchEvent(ev);
    this.setState({text: ''});
  }
  , render: function() {
    return React.DOM.div({className: 'commentor'}
      , React.DOM.form({onSubmit: this.handleSubmit}
        , React.DOM.input({onChange: this.onChange, value: this.state.text})
        , React.DOM.button(null, 'Post')
      )
    );
  }
});
